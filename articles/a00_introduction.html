<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting started • Cohort2Trajectory</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.2.1/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.2.1/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">Cohort2Trajectory</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/a00_introduction.html">Getting started</a></li>
    <li><a class="dropdown-item" href="../articles/a01_configuration.html">Configuration</a></li>
    <li><a class="dropdown-item" href="../articles/a02_import.html">Import data</a></li>
    <li><a class="dropdown-item" href="../articles/a03_trajectories.html">Create trajectories</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting started</h1>
            
      

      <div class="d-none name"><code>a00_introduction.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <strong>Cohort2Trajectory</strong> package is designed for
patients’ medical trajectory creation. It accepts a target cohort of any
size from your OMOP CDM instance and allows you to provide the state
cohorts which will populate the observation time of the target cohort as
trajectories. The package outputs patient level trajectories with no
void time-interval described by your input state cohorts. These
trajectories can be later used for further analysis, modeling and
visualization!</p>
</div>
<div class="section level2">
<h2 id="example-with-samplecohort2trajectory">Example with SampleCohort2Trajectory<a class="anchor" aria-label="anchor" href="#example-with-samplecohort2trajectory"></a>
</h2>
<div class="section level3">
<h3 id="initiating-the-database-connection">Initiating the database connection<a class="anchor" aria-label="anchor" href="#initiating-the-database-connection"></a>
</h3>
<p>The package relies heavily on OMOP CDM, therefore a database
connection must be initiated. The <a href="https://cran.r-project.org/web/packages/CDMConnector/index.html" class="external-link">CDMConnector</a>
package is used to establish the database connection for running
<code>Cohort2Trajecotry</code>. You can configure the connection either
by reading credentials from a <code>.Renviron</code> file or explicitly
writing them in your script.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">user</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_USERNAME"</span><span class="op">)</span></span>
<span><span class="va">pw</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_PASSWORD"</span><span class="op">)</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html" class="external-link">str_c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_HOST"</span><span class="op">)</span>, <span class="st">"/"</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_NAME"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">port</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_PORT"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdmSchema</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"OHDSI_CDM"</span><span class="op">)</span> <span class="co"># Schema which contains the OHDSI Common Data Model</span></span>
<span><span class="va">cdmVocabSchema</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"OHDSI_VOCAB"</span><span class="op">)</span> <span class="co"># Schema which contains the OHDSI Common Data Model vocabulary tables.</span></span>
<span><span class="va">cdmResultsSchema</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"OHDSI_RESULTS"</span><span class="op">)</span> <span class="co"># Schema which contains "cohort" table (is not mandatory)</span></span>
<span><span class="va">writeSchema</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"OHDSI_WRITE"</span><span class="op">)</span> <span class="co"># Schema for temporary tables, will be deleted</span></span>
<span><span class="va">writePrefix</span> <span class="op">&lt;-</span> <span class="st">"cc_"</span></span>
<span></span>
<span><span class="va">db</span> <span class="op">=</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span></span>
<span>  <span class="fu">RPostgres</span><span class="fu">::</span><span class="fu">Postgres</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  dbname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_NAME"</span><span class="op">)</span>,</span>
<span>  host <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_HOST"</span><span class="op">)</span>,</span>
<span>  user <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_USERNAME"</span><span class="op">)</span>,</span>
<span>  password <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"DB_PASSWORD"</span><span class="op">)</span>,</span>
<span>  port  <span class="op">=</span> <span class="va">port</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu">CDMConnector</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/cdm_from_con.html" class="external-link">cdm_from_con</a></span><span class="op">(</span></span>
<span>  con <span class="op">=</span> <span class="va">db</span>,</span>
<span>  cdm_schema <span class="op">=</span> <span class="va">cdmSchema</span>,</span>
<span>  achille_schema <span class="op">=</span> <span class="va">cdmResultsSchema</span>,</span>
<span>  write_schema <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>schema <span class="op">=</span> <span class="va">writeSchema</span>, prefix <span class="op">=</span> <span class="va">writePrefix</span><span class="op">)</span>,</span>
<span><span class="op">)</span></span></code></pre></div>
<p>For the purpose of the example, let us use a synthetic database.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">db</span>  <span class="op">&lt;-</span> <span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbConnect.html" class="external-link">dbConnect</a></span><span class="op">(</span><span class="fu">duckdb</span><span class="fu">::</span><span class="fu"><a href="https://r.duckdb.org/reference/duckdb.html" class="external-link">duckdb</a></span><span class="op">(</span><span class="op">)</span>, dbdir <span class="op">=</span> <span class="fu">CDMConnector</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/eunomiaDir.html" class="external-link">eunomia_dir</a></span><span class="op">(</span><span class="st">"GiBleed"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># The Synthetic Eunomai database does not have defined cohorts, so let create a dummy table</span></span>
<span><span class="va">cohorts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>subject_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">6</span>,<span class="fl">6</span>,<span class="fl">6</span>,<span class="fl">123</span>,<span class="fl">123</span>,<span class="fl">123</span><span class="op">)</span>,</span>
<span>                         cohort_definition_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span>,</span>
<span>                         cohort_start_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1970-01-01"</span><span class="op">)</span>,</span>
<span>                                               <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1970-02-18"</span><span class="op">)</span>,</span>
<span>                                               <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1970-03-02"</span><span class="op">)</span>,</span>
<span>                                               <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1970-04-01"</span><span class="op">)</span>,</span>
<span>                                               <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1968-01-05"</span><span class="op">)</span>,</span>
<span>                                               <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1968-02-01"</span><span class="op">)</span>,</span>
<span>                                               <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1968-03-12"</span><span class="op">)</span></span>
<span>                         <span class="op">)</span>,</span>
<span>                         cohort_end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1971-01-01"</span><span class="op">)</span>,</span>
<span>                                             <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1970-02-28"</span><span class="op">)</span>,</span>
<span>                                             <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1970-03-05"</span><span class="op">)</span>,</span>
<span>                                             <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1970-04-15"</span><span class="op">)</span>,</span>
<span>                                             <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1969-01-01"</span><span class="op">)</span>,</span>
<span>                                             <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1968-02-04"</span><span class="op">)</span>,</span>
<span>                                             <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"1968-03-19"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu">CDMConnector</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/CDMConnector/reference/cdm_from_con.html" class="external-link">cdm_from_con</a></span><span class="op">(</span></span>
<span>  con <span class="op">=</span> <span class="va">db</span>,</span>
<span>  cdm_name <span class="op">=</span> <span class="st">"eunomia"</span>,</span>
<span>  cdm_schema <span class="op">=</span> <span class="st">"main"</span>,</span>
<span>  write_schema <span class="op">=</span> <span class="st">"main"</span></span>
<span><span class="op">)</span></span>
<span><span class="va">cdm</span> <span class="op">&lt;-</span> <span class="fu">omopgenerics</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/insertTable.html" class="external-link">insertTable</a></span><span class="op">(</span><span class="va">cdm</span>, <span class="va">cohorts</span>, name <span class="op">=</span>  <span class="st">"cohort"</span><span class="op">)</span></span>
<span><span class="va">cdm</span><span class="op">$</span><span class="va">cohort</span> <span class="op">&lt;-</span> <span class="fu">omopgenerics</span><span class="fu">::</span><span class="fu"><a href="https://darwin-eu.github.io/omopgenerics/reference/newCohortTable.html" class="external-link">newCohortTable</a></span><span class="op">(</span><span class="va">cdm</span><span class="op">$</span><span class="va">cohort</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="study-configuration">Study configuration<a class="anchor" aria-label="anchor" href="#study-configuration"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">studyEnv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cohort2TrajectoryConfiguration.html">cohort2TrajectoryConfiguration</a></span><span class="op">(</span></span>
<span>  baseUrl <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  studyName <span class="op">=</span> <span class="st">"SampleCohort2Trajectory"</span>,</span>
<span>  pathToStudy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  atlasTargetCohort <span class="op">=</span> <span class="fl">1</span>, <span class="co"># The id of the target cohort</span></span>
<span>  atlasStateCohorts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, <span class="co"># The ids of the state cohort</span></span>
<span>  stateCohortLabels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test_state1"</span>, <span class="st">"test_state2"</span><span class="op">)</span>,</span>
<span>  stateCohortMandatory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test_state2"</span><span class="op">)</span>,</span>
<span>  stateCohortAbsorbing <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test_state2"</span><span class="op">)</span>,</span>
<span>  outOfCohortAllowed <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  trajectoryType <span class="op">=</span> <span class="st">"Discrete"</span>,</span>
<span>  lengthOfStay <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  stateSelectionType <span class="op">=</span> <span class="st">"Priority"</span>,</span>
<span>  stateCohortPriorityOrder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"test_state1"</span>, <span class="st">"test_state2"</span><span class="op">)</span>,</span>
<span>  runSavedStudy <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  useCDM <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  batchSize <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Warning as output is expected, the study used as an example already
exists.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>Warning message<span class="sc">:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>Study name already <span class="cf">in</span> use, consider renaming<span class="sc">!</span> </span></code></pre></div>
</div>
<div class="section level3">
<h3 id="importing-data">Importing data<a class="anchor" aria-label="anchor" href="#importing-data"></a>
</h3>
<p>To import and preprocess the data, the following function is
used:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/getDataForStudy.html">getDataForStudy</a></span><span class="op">(</span>cdm <span class="op">=</span> <span class="va">cdm</span>, studyEnv <span class="op">=</span> <span class="va">studyEnv</span><span class="op">)</span></span></code></pre></div>
<p>Cleaned imported data is in the /SampleCohort2Trahectory/Data folder.
Expected output:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">getDataForStudy</span>(<span class="at">cdm =</span> cdm,<span class="at">studyEnv =</span> studyEnv)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>✔ Importing data ... [64ms]</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>✔ Get cohort data success<span class="sc">!</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>✔ Data cleaning completed<span class="sc">!</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>ℹ Saved cleaned data <span class="sc">/</span>Git<span class="sc">/</span>Cohort2Trajectory<span class="sc">/</span>SampleCohort2Trajectory<span class="sc">/</span>Data<span class="sc">/</span>importedDataCleaned_1.csv</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>✔ Cleaning data ... [170ms]</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="creating-trajectories">Creating trajectories<a class="anchor" aria-label="anchor" href="#creating-trajectories"></a>
</h3>
<p>To create trajectories the following function is used:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/createTrajectories.html">createTrajectories</a></span><span class="op">(</span>cdm <span class="op">=</span> <span class="va">cdm</span>, runSavedStudy <span class="op">=</span> <span class="cn">F</span>,studyEnv <span class="op">=</span> <span class="va">studyEnv</span><span class="op">)</span></span></code></pre></div>
<p>Expected output:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ℹ Creating batch <span class="dv">1</span><span class="sc">!!!</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>ℹ Saved trajectory dataframe<span class="sc">:</span> <span class="er">/</span>Git<span class="sc">/</span>Cohort2Trajectory<span class="sc">/</span>SampleCohort2Trajectory<span class="sc">/</span>Data<span class="sc">/</span>patientDataDiscrete.csv</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>ℹ Saving trajectories to the specified temp schema ...</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>ℹ Trajectories saved to the specified temp schema<span class="sc">!</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>ℹ Saved settings to<span class="sc">:</span> <span class="er">/</span>Git<span class="sc">/</span>Cohort2Trajectory<span class="sc">/</span>SampleCohort2Trajectory<span class="sc">/</span>Settings<span class="sc">/</span>trajectorySettings.csv</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>✔ Trajectories generated<span class="sc">!</span></span></code></pre></div>
<p>Created trajectories are in the
<code>/SampleCohort2Trajectory/Data</code> folder.</p>
</div>
<div class="section level3">
<h3 id="results">Results<a class="anchor" aria-label="anchor" href="#results"></a>
</h3>
<table style="width:100%;" class="table">
<caption>CSV Data Content</caption>
<colgroup>
<col width="9%">
<col width="10%">
<col width="14%">
<col width="12%">
<col width="12%">
<col width="10%">
<col width="15%">
<col width="6%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="right">subject_id</th>
<th align="left">state_label</th>
<th align="left">state_start_date</th>
<th align="left">state_end_date</th>
<th align="right">time_in_cohort</th>
<th align="right">seq_ordinal</th>
<th align="right">gender_concept_id</th>
<th align="right">age</th>
<th align="left">state_id</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">6</td>
<td align="left">START</td>
<td align="left">1970-02-18</td>
<td align="left">1970-02-18</td>
<td align="right">0.0000000</td>
<td align="right">1</td>
<td align="right">8532</td>
<td align="right">6.136</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">test_state1</td>
<td align="left">1970-02-18</td>
<td align="left">1970-03-20</td>
<td align="right">0.0000000</td>
<td align="right">1</td>
<td align="right">8532</td>
<td align="right">6.136</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="right">6</td>
<td align="left">test_state1</td>
<td align="left">1970-03-20</td>
<td align="left">1970-04-19</td>
<td align="right">0.0821355</td>
<td align="right">2</td>
<td align="right">8532</td>
<td align="right">6.218</td>
<td align="left">2</td>
</tr>
<tr class="even">
<td align="right">6</td>
<td align="left">EXIT</td>
<td align="left">1970-04-20</td>
<td align="left">1970-04-20</td>
<td align="right">0.0821355</td>
<td align="right">1</td>
<td align="right">8532</td>
<td align="right">6.303</td>
<td align="left">4</td>
</tr>
<tr class="odd">
<td align="right">123</td>
<td align="left">START</td>
<td align="left">1968-02-01</td>
<td align="left">1968-02-01</td>
<td align="right">0.0000000</td>
<td align="right">1</td>
<td align="right">8507</td>
<td align="right">17.807</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="right">123</td>
<td align="left">test_state1</td>
<td align="left">1968-02-01</td>
<td align="left">1968-03-02</td>
<td align="right">0.0000000</td>
<td align="right">1</td>
<td align="right">8507</td>
<td align="right">17.807</td>
<td align="left">2</td>
</tr>
<tr class="odd">
<td align="right">123</td>
<td align="left">test_state2</td>
<td align="left">1968-03-02</td>
<td align="left">1968-04-01</td>
<td align="right">0.0821355</td>
<td align="right">1</td>
<td align="right">8507</td>
<td align="right">17.889</td>
<td align="left">3</td>
</tr>
<tr class="even">
<td align="right">123</td>
<td align="left">EXIT</td>
<td align="left">1968-04-02</td>
<td align="left">1968-04-02</td>
<td align="right">0.0821355</td>
<td align="right">1</td>
<td align="right">8507</td>
<td align="right">17.974</td>
<td align="left">4</td>
</tr>
</tbody>
</table>
<p>To disconnect:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbDisconnect.html" class="external-link">dbDisconnect</a></span><span class="op">(</span><span class="va">db</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Markus Haug, Greete Kelli Aava, Raivo Kolde.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
